[[!meta title="Create and use encrypted volumes"]]

The simplest way to carry around the documents you want to use with Tails and
make sure that they haven't been accessed or modified is to store them in an
encrypted volume: a dedicated partition on a USB stick or external hard-disk.

Tails comes with utilities for LUKS, a standard for disk-encryption under Linux. 

  - <span class="application">GNOME Disks</span> allows you to
    create encrypted volumes.
  - The GNOME desktop allows you to open encrypted volumes.

<div class="tip">

<p>To store encrypted files on a Tails device, it is recommended to create a
[[persistent volume|first_steps/persistence]] instead.</p>

</div>

[[!toc levels=1]]

Create an encrypted partition
=============================

To open <span class="application">GNOME Disks</span> choose
<span class="menuchoice">
  <span class="guimenu">Applications</span>&nbsp;▸
  <span class="guisubmenu">Utilities</span>&nbsp;▸
  <span class="guimenuitem">Disks</span></span>.

<h2 class="bullet-number-one">Identify your external storage device</h2>

<span class="application">Disks</span> lists all the current storage
devices on the left side of the screen.

  1. Plug in the external storage device that you want to use.

  1. A new device appears in the list of storage devices. Click on it:

     [[!img storage_devices_after.png link=no alt="A new storage device appeared
     in the list"]]

<h2 class="bullet-number-two">Format the device</h2>

  1. Check that the description of the device on the right side of the screen
  corresponds to your device: its brand, its size, etc.

  1. Click on the <span class="guimenu">[[!img lib/emblem-system.png alt="System" class="symbolic" link="no"]]</span> button
     in the titlebar and choose <span class="guilabel">Format…</span>
     to erase all the existing partitions on the device.

  1. In the <span class="guilabel">Format Disk</span> dialog:

     - If you want to erase all data securely, choose to
       <span class="guilabel">Overwrite existing data with zeroes</span> in the
       <span class="guilabel">Erase</span> drop-down list.

     - Choose <span class="guilabel">Compatible with all
       systems and devices (MBR/DOS)</span> in the <span class="guilabel">Partitioning</span>
       drop-down list.

     Then click <span class="button">Format…</span>.

  1. In the confirmation dialog, make sure that the device
     is correct. Click <span class="application">Format</span> to confirm.

<h2 class="bullet-number-three">Create a new encrypted partition</h2>

Now the schema of the partitions in the middle of the screen shows an empty
device.

[[!img empty_device.png link=no alt="Free 3.9 GB"]]

  1. Click on the <span class="guimenu">[[!img lib/list-add.png alt="Create partition" class="symbolic" link="no"]]</span>
     button to create a new partition on the device.

  1. In the <span class="guilabel">Create Partition<span> dialog:

    - <span class="guilabel">Erase</span>. Since you already formatted your device
      you can leave the default option.
    - <span class="guilabel">Partition Size</span>. You can decide to create a partition
      on the whole device or just on part of it. In this example we are creating
      a partition of 4.0 GB on a device of 8.1 GB.

    - <span class="guilabel">Type</span>. Choose
      <span class="guilabel">Encrypted, compatible with Linux systems (LUKS + Ext4)</span>
      from the drop-down list.

    - <span class="guilabel">Name</span>. You can set a name for the partition.
      This name remains invisible until the partition is open but can help
      you to identify it during use.

    - <span class="guilabel">Passphrase</span>. Type a passphrase for the
      encrypted partition and repeat it to confirm.
 

    Then click on the <span class="button">Create</span> button.

     <div class="bug">
     <p>If an error occurs while creating the new partition, try to unplug the
     device, restart <span class="application">GNOME Disks</span>,
     and follow all steps again from the beginning.</p>
     </div>

  1. Creating the partition takes from a few seconds to a few minutes. After
     that, the new encrypted partition appears in the volumes of the device:

     [[!img encrypted_partition.png link="no" alt="Encrypted 2.0 GB / secret 2.0 GB ext4"]]

  1. At this point you can create another partitions in the free space left on the
     device, if you want, by clicking on it and clicking on the
     <span class="guimenu">[[!img lib/list-add.png alt="Create partition" class="symbolic" link="no"]]</span>
     button again.

<h2 class="bullet-number-four">Use the new partition</h2>

You can open this new partition from the sidebar of the file browser <span class="guimenu">
Nautilus</span> with the name you gave it.

[[!img nautilus_secret.png link="no" alt="Nautilus Volume named secret"]]

After opening the partition once with <span class="guimenu">
Nautilus</span> you can also access it
from the <span class="guimenu">Places</span> menu:

[[!img places_secret.png link=no alt="Places&nbsp;▸ secret"]]

Open an existing encrypted partition
====================================

When plugging in a device containing an encrypted partition, Tails does not open it
automatically but it appears in the sidebar of the <span class="guimenu">Nautilus
</span> file browser.
To open <span class="guimenu">Nautilus</span>, choose
<span class="menuchoice">
  <span class="guimenu">Places</span>&nbsp;▸
  <span class="guisubmenu">Computer</span></span>.
All available storage devices are shown in the left window-pane:

[[!img nautilus_encrypted.png link="no" alt="File browser with '4.0 GB Encrypted' entry in the sidebar"]]

Click on the device. A pop-up window will appear and ask for the passphrase of the
device. Enter your passphrase and open the device by clicking on <span class="guilabel">Unlock</span>.
If you choose the option <span class="guilabel">Remember Password</span> and you have
the <span class="guilabel">[[GNOME Keyring|first_steps/persistence/configure#gnome_keyring]]</span>
persistence feature activated, the password will be remembered across multiple
working sessions.

[[!img nautilus_password.png link="no" alt="Nautilus unlock encrypted device"]]

After you opened the encrypted volume once with <span class="guimenu">
Nautilus</span> you can access it from the <span class="guimenu">Places</span> menu. 

[[!img places_secret.png link="no" alt="Places&nbsp;▸ 2.0 GB Encrypted"]]

Once you are done using the device, to close the encrypted partition choose
<span class="menuchoice">
  <span class="guimenu">Places</span>&nbsp;▸
  <span class="guisubmenu">Computer</span></span>,
right-click on the device, and choose <span class="guilabel">Safely
Remove Drive</span>. Alternatively you can click on the
<span class="guimenu">[[!img lib/media-eject.png alt="Eject" class="symbolic" link="no"]]</span>
button next to the device's name.

Storing sensitive documents
===========================

Such encrypted volumes are not hidden. An attacker in possession of
the device can know that there is an encrypted volume on it. Take into consideration
that you can be forced or tricked to give out its passphrase.

Opening encrypted volumes from other operating systems
======================================================

It is possible to
open such encrypted volumes from other operating systems, but it might break
your security.
Other operating systems should probably not be trusted to handle
sensitive information or leave no trace.
