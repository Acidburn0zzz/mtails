[[!meta title="Migrating from Claws Mail to Icedove"]]

For reading and writing email, Tails includes <span
class="application">[Icedove](https://wiki.debian.org/Icedove)</span>.
Tails ships Icedove with Torbirdy, an extension which makes sure 
that connections go through Tor.
Furthermore, you will be able to use Enigmail, an easy interface 
for sending and receiving GPG encrypted emails.

If you previously used ClawsMail and have activated its persistence feature,
you are likely to want to migrate your mailboxes to Icedove.

Migrate account passwords
-------------------------

Please beware that account passwords are stored by ClawsMail in an encrypted
fashion and cannot be retrieved or migrated automatically.

Migrate an email accounts
-------------------------

In order to migrate your email accounts you will need to use Icedove's account c
reation wizard, then you'll be able to retrieve and send your emails through Icedove.

To start <span class="application">Icedove</span> choose
<span class="menuchoice">
  <span class="guimenu">Applications</span>&nbsp;▸
  <span class="guisubmenu">Internet</span>&nbsp;▸
  <span class="guimenuitem">Icedove</span>
</span>.

When you start Icedove for the first time, the account creation wizard 
will pop up automatically. Please enter your credentials: name, email address, 
password and chose the protocol, probably IMAP, then click "Continue".

You will be presented the Torbirdy screen, indicating that the next steps will
also need to be manually configured. Click Ok.

The account settings window now presents you with the server settings. Here, 
you will need to adjust the server name, user name and security settings for 
retrieving your email.

Then, you will be able to click on "Outgoing server" and adjust the settings 
for sending email.

One can verify the previous account settings in Claws Mail's Configuration menu.
Fire up Claws Mail, click on Configuration, then account settings, then Edit.

If you need to add multiple accounts, click on Account Actions, then Add Mail Account.

When done, click OK. This will close the Account Settings window.

Enigmail will now ask you if you need help. If you use GPG, you can now either
generate a new encryption key or import one from your Persistent volume.

You can now use Icedove.

For further configuration options please refer to the Icedove documentation XXX.

Migrate existing emails 
------------- ----------

If you use IMAP, your emails are stored on the remote email server.
You will not need to migrate them.

If you use POP for your accounts, and have stored email in your persistent volume, we 
propose a script to move your existing emails from Claws to Icedove.

In order to use this script, you will once need to install the `nmh` tool.

The script assumes that you've never started Icedove yet.
If you've already used Icedove before you are likely to have a local folder already.
The script will suggest to backup this folder for you.
In order to access it, you can go to Icedove's Account Settings and Browse the Local Folder
directory.

1. Boot Tails with an administration password.
2. Open a terminal and type `sudo apt-get install nmh`
3. Save the script and make it executable
   `wget XXX migrate.sh`
   `chmod +x migrate.sh`
4. Then execute the script
   `./migrate.sh`

Note that the script does not support migrating multiple MH boxes.

Export email contacts from Claws to Icedove
-------------------------------------------

In Claws Mail, access the Address book through the main menu "Extras" -> Address book 
or press Shift+Ctrl+A. Select an address book on the left then click on "Extras" -> 
Export LDIF. Select a place where to store the file, then click Next. You do not need
to add a Suffix, so just click Next, then Close.

In Icedove, simply click the Address book icon. In the address book window, click "Tools" 
-> Import, select "Address Books" then click Next. Choose "Text file (LDIF, .tab, .csv, .txt)".
Now click Next and navigate to the file you have saved from Claws Mail. Click Ok, you're done.
