<!DOCTYPE html>

<html lang="en" dir="ltr" xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tails - Tails February 2016 report</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<link rel="icon" href="../../../../favicon.ico" type="image/x-icon" />

<link rel="stylesheet" href="../../../../style.css" type="text/css" />

<link rel="stylesheet" href="../../../../local.css" type="text/css" />


<script src="../../../../lib/js/mirror-dispatcher.js" type="text/javascript"></script>









</head>


<body class="en">


<div class="searchform">



</div>

<div class="banner" role="banner">
  <a class="tails" href="../../../../index.en.html">
    <span class="acronym">Tails</span><br/>
    <span class="slogan">The Amnesic Incognito Live System</span>
  </a>
</div>

<div class="page">

<div class="pageheader">
<div class="header">
<span>
<span class="parentlinks">
<ul id="crumbs">
<li><a href="../../../../index.en.html"><img src="../../../../lib/home.png"></a></li>







<li><a href="../../../../contribute.en.html">contribute</a></li>





<li><a href="../../../reports.html">reports</a></li>





<li><a href="../../SponsorS.html">SponsorS</a></li>





<li><a href="../../../../index.en.html">2015</a></li>




<li>Tails February 2016 report</li>

</ul>
</span>
<span class="title">
Tails February 2016 report
</span>
</span>
</div>










</div>



<div class="sidebar" role="navigation">
<div class="download button">
  <a href="../../../../install.en.html"><span class="download">Install</span>
    <span class="tails">Tails 
3.9
</span>
    <span class="date">
2018-09-05</span></a>
</div>




<div class="links">
  <ul>
    <li><a href="../../../../about.en.html">About</a></li>
    <li><a href="../../../../getting_started.en.html">Getting startedâ€¦</a></li>
    <li><a href="../../../../doc.en.html">Documentation</a></li>
    <li><a href="../../../../support.en.html">Help &amp; Support</a></li>
    <li><a href="../../../../contribute.en.html">Contribute</a></li>
    <li><a href="../../../../news.en.html">News</a></li>
  </ul>
</div>




<div class="donate button">
    <a href="https://tails.boum.org/donate?r=sidebar">Donate</a>
</div>


</div>



<div id="pagebody">

<div id="content" role="main">


<div class="toc">
<ol>
	<li class="L1"><a href="#index1h1">A. Replace Claws Mail with Icedove</a>
	</li>
	<li class="L1"><a href="#index2h1">B. Improve our quality assurance process</a>
	<ol>
		<li class="L2"><a href="#index1h2">B.1. Automatically build ISO images for all the branches of our source code that are under active development</a>
		</li>
		<li class="L2"><a href="#index2h2">B.2. Continuously run our entire test suite on all those ISO images once they are built</a>
		</li>
		<li class="L2"><a href="#index3h2">B.3. Extend the coverage of our test suite</a>
		</li>
		<li class="L2"><a href="#index4h2">B.4. Freezable APT repository</a>
		</li>
	</ol>
	</li>
	<li class="L1"><a href="#index3h1">C. Scale our infrastructure</a>
	<ol>
		<li class="L2"><a href="#index5h2">C.1. Change in depth the infrastructure of our pool of mirrors</a>
		</li>
		<li class="L2"><a href="#index6h2">C.2. Be able to detect within hours failures and malfunction on our services</a>
		</li>
		<li class="L2"><a href="#index7h2">C.4. Maintain our already existing services</a>
		</li>
	</ol>
	</li>
	<li class="L1"><a href="#index4h1">D. Migration to Debian Jessie</a>
	</li>
	<li class="L1"><a href="#index5h1">E. Release management</a>
	</li>
</ol>
</div>


<p>This report covers the activity of Tails in February 2016.</p>

<p>Everything in this report can be made public.</p>

<h1><a name="index1h1"></a>A. Replace Claws Mail with Icedove</h1>

<p>The last few traces of Claws Mail has been purged from Tails
(<a href="https://labs.riseup.net/code/issues/10904">#10904</a>).</p>

<ul>
<li><p>A.1.1 Secure the Icedove autoconfig wizard: <a href="https://labs.riseup.net/code/issues/6154">#6154</a></p>

<p>We've successfully built Debian packages and tested our patches in
Icedove.</p>

<p>The proof-of-concept branch that integrates the secured wizard into
Tails was delayed again, due to unexpected personal matters that
kept one of us away from keyboards. We are confident we can have
this feature completed and released by the end of this contract.
In March we are reorganizing our team to make this possible, and
will submit an updated timeline in our next report.</p></li>
<li><p>A.1.2 Make our improvements maintainable for future versions of Icedove</p>

<p>We've posted our patches upstream and received some first comments
which approve of our concept, and even suggest to force the use SSL
for all connections. (<a href="https://labs.riseup.net/code/issues/6156">#6156</a>)</p></li>
<li><p>A.1.5. Update Icedove documentation</p>

<p>The design documentation has been updated to reflect the current
state of the Icedove integration into
Tails. (<a href="https://labs.riseup.net/code/issues/10737">#10737</a>)</p></li>
</ul>


<h1><a name="index2h1"></a>B. Improve our quality assurance process</h1>

<h2><a name="index1h2"></a>B.1. Automatically build ISO images for all the branches of our source code that are under active development</h2>

<p>In February, <strong>603 ISO images</strong> were automatically built by our Jenkins
instance.</p>

<p>The code that manages the cleaning of previous builds leftovers on our
builder VMs is ready and waiting for reviews. (<a href="https://labs.riseup.net/code/issues/10772">#10772</a>)</p>

<h2><a name="index2h2"></a>B.2. Continuously run our entire test suite on all those ISO images once they are built</h2>

<p>In February, <strong>597 ISO images</strong> were automatically tested by our Jenkins
instance.</p>

<ul>
<li><p>B.2.4. Implement and deploy the best solution from this research: <a href="https://labs.riseup.net/code/issues/5288">#5288</a></p>

<p>We decided on a way to collectively check for false positives in our
test infrastructure. We have planned a shift per month so that we're sure
one of us is taking care of them. (<a href="https://labs.riseup.net/code/issues/10993">#10993</a>)</p>

<p>We still need to check if two minor bugs are around, but they don't seem
to prevent our automated tests to be run. (<a href="https://labs.riseup.net/code/issues/10725">#10725</a> and
<a href="https://labs.riseup.net/code/issues/10601">#10601</a>)</p></li>
</ul>


<h2><a name="index3h2"></a>B.3. Extend the coverage of our test suite</h2>

<h3><a name="index1h3"></a>B.3.10. Write automated tests for the new features in 2016Q1</h3>

<p>In February, we postponed most of this work: part of our team was
focused on improving our existing test cases (B.3.11, see below), and
unexpected personal matters have been keeping one of us away from
keyboards in the last few months. Some other developers joined to give
a hand, and we are confident we can get this work done later this year,
possibly at the same time as B.3.15 (which is the same deliverable,
but for features added in 2016Q2).</p>

<p>Still, one recently introduced feature is now covered by automated
tests:</p>

<ul>
<li>Automatically test the Greeter's Disable All Networking option
(<a href="https://labs.riseup.net/code/issues/10340">#10340</a>)</li>
</ul>


<h3><a name="index2h3"></a>B.3.11. Fix newly identified issues to make our test suite more robust and faster</h3>

<ul>
<li><p>Reduce peak space requirement for full test suite runs</p>

<p>Given the snapshot improvements reported about before
(<a href="https://labs.riseup.net/code/issues/6094">#6094</a>) our test suite accumulates more and more
virtual machine snapshots throughout a full run, and has to keep
most of them until the end. These occupy quite a bit of disk space,
which in our case translates into RAM since we want everything
stored in RAM for performance reasons. By optimizing the order in
which our features are run we have managed to reduce the peak space
requirement, which allows us to run more tests in parallel on the
same hardware. (<a href="https://labs.riseup.net/code/issues/10503">#10503</a>)</p></li>
<li><p>Robustness improvements</p>

<p>Given the rather large amount of robustness issues we experience, we
have rethought our strategy and will try more fundamental approaches
to attacking them. The vast majority of issues fall into two
categories:</p>

<ul>
<li><p>Transient network issues: the Tor network simply isn't as reliable
as our test suite assumes, resulting in tests failing due to
unexpectedly long timeouts and similar. So far our approach has
been to make our tests retry the failing actions in the specific
places where they occur, much like how a user would deal with the
situation. However, this does not scale well, since it seems we
have to do this everywhere, and the code for this is not always
straightforward.</p>

<p>Instead we will improve the Tor network stability by making our
test suite set up its own private Tor network. This
should eliminate all network instability introduced by normal Tor
usage. (<a href="https://labs.riseup.net/code/issues/9521">#9521</a>)</p>

<p>In the long-term, and certainly outside the scope of this
contract, we would like to extend this network simulation so that
all network services used in tests are run locally, and the real
Internet is not used at all. (<a href="https://labs.riseup.net/code/issues/9519">#9519</a>,
<a href="https://labs.riseup.net/code/issues/9520">#9520</a>)</p></li>
<li><p>Glitches when interacting with graphical user interfaces:
currently we simulate users with a black box approach where
we rely on exact images for the elements it interacts
with. This has turned out harder than anticipated, since modern
desktop environments do not behave as deterministically as one
would hope.</p>

<p>Our new plan is to leverage the interfaces used by assistive
technologies (like screen readers) to communicate the
structure and layout of graphical user interfaces to sight
impaired users. This will allow a more deterministic and reliable
approach for our test suite to interact with applications.</p></li>
</ul>


<p>Besides this, the following specific robustness issues were fixed:</p>

<ul>
<li><p>Test that clicks the roadmap URL in Pidgin is fragile
(<a href="https://labs.riseup.net/code/issues/10783">#10783</a>)</p></li>
<li><p>The "I can view and print a PDF file stored in /usr/share"
scenario is fragile (<a href="https://labs.riseup.net/code/issues/10775">#10775</a>)</p></li>
</ul>
</li>
<li><p>Performance improvements on Jenkins</p>

<p>We figured we could probably get some nice test suite performance
improvements, on our Jenkins environment, by optimizing the platform
itself.</p>

<p>After an initial round of benchmarking conducted in January, our
next action was to give our server more RAM in order to give us more
flexibility to evaluate different configuration options. This was
done in February, and then we went through a few optimization
cycles, identifying bottlenecks and addressing them until we were
satisfied (<a href="https://labs.riseup.net/code/issues/11175">#11175</a>, <a href="https://labs.riseup.net/code/issues/11113">#11113</a>,
<a href="https://tails.boum.org/blueprint/hardware_for_automated_tests_take2/#benchmarks">https://tails.boum.org/blueprint/hardware_for_automated_tests_take2/#benchmarks</a>).</p>

<p>As a result, we have improved our test suite runs throughput, in the
worst case scenario, from 3.3 to 8 runs per hour. This gives us room
to run more automated tests in that environment, and also shortens
the feedback loop for developers, since congestion is now less
likely to happen. We will keep an eye on metrics to confirm, in one
or two months, that real workloads indeed benefit from
these changes.</p></li>
</ul>


<h2><a name="index4h2"></a>B.4. Freezable APT repository</h2>

<p>This project was still on hold in February, while the developer
responsible for this project was focusing on other matters; we will
resume work on it in March. However, we mistakenly scheduled for
milestone V (April 15) two big projects that have the same developers,
so we decided to spread them more evenly over the remaining five
months of this contract; in April we will focus on C.1 (Change in
depth the infrastructure of our pool of mirrors), and here is the
updated schedule for the freezable APT repository project.</p>

<p>By the end of March, we want to:</p>

<ul>
<li><p>complete the design and discussion phase, that is "B.4.1.
Specify when we want to import foreign packages into which APT
suites" (<a href="https://labs.riseup.net/code/issues/9488">#9488</a>), and "B.4.4. Design freezable APT
repository" (<a href="https://labs.riseup.net/code/issues/9487">#9487</a>);</p></li>
<li><p>make enough progress on "B.4.2. Implement a mechanism to save the
list of packages used at ISO build time" so it can be merged in
April, ideally in time for Tails 2.3;</p></li>
<li><p>have a working proof-of-concept for most other essential pieces of
infrastructure and code.</p></li>
</ul>


<p>Then, after a hiatus in April while we will be focused on our pool of
HTTP mirrors, in May we want to improve the freezable APT repository
as needed, aiming at merging code into the main development branch,
and deploying all pieces of infrastructure in production, by the end
of the month. Our current goal is to build Tails 2.4 (scheduled on
June 7th) using our freezable APT repository.</p>

<p>And then, we will still have two months, until the end of the
contract. This slack might be needed if previous steps take more time
than expected, and if not it will be time for us to identify remaining
issues, gather feedback from release managers and developers, and to
improve tools and documentation as we deem necessary.</p>

<h1><a name="index3h1"></a>C. Scale our infrastructure</h1>

<h2><a name="index5h2"></a>C.1. Change in depth the infrastructure of our pool of mirrors</h2>

<ul>
<li><p>C.1.1. Specify a way of describing the pool of mirrors
(<a href="https://labs.riseup.net/code/issues/8637">#8637</a>)</p>

<p>We've designed a file format, encoded it into a JSON schema, created
a simple validation script, and published an example configuration
file.</p>

<p>We have discussed with the developers of the Download And
Verification Extension (DAVE) for Firefox how it will be able to
leverage this configuration file, and the code we are writing for
"C.1.2. Write &amp; audit the code that makes the redirection decision
from our website", so that DAVE uses our new mirror pool design
(<a href="https://labs.riseup.net/code/issues/10284">#10284</a>). This discussion made us confident that
what we have been working on so far is compatible with DAVE.</p></li>
<li><p>C.1.3. Design and implement the mirrors pool administration process
and tools (<a href="https://labs.riseup.net/code/issues/8638">#8638</a>, <a href="https://labs.riseup.net/code/issues/11122">#11122</a>)</p>

<p>Building on top of what was done for C.1.1, a way to convey the
mirror pool's configuration to the dispatcher script, based on
ikiwiki underlays and Git, was designed and implemented.</p></li>
</ul>


<p>Finally, we have organized our team to work on the next steps of this
project. A dedicated sprint will take place in April, during which we
want to complete all the needed programming, documentation and setup
tasks. Actual deployment might require more time, though: depending on
how fast mirror operators are to adjust to the new setup, we may have
to postpone the production deployment to May.</p>

<h2><a name="index6h2"></a>C.2. Be able to detect within hours failures and malfunction on our services</h2>

<ul>
<li><p>C.2.1. Research and decide what monitoring solution to use
       what tools and abstraction layer to use for configuring it,
       and where to host it: <a href="https://labs.riseup.net/code/issues/8645">#8645</a></p>

<p>We settled on a plan while refining the details of the implementation
of Icinga2 in our infrastructure.</p>

<p>We agreed to use its decentralized feature to isolate our monitored
systems from our monitoring one: a VM on the monitored host will be
set up as a Icinga2 <code>satellite</code>, and will collect the datas from the
other monitored systems, to send them back to the monitoring system
Icinga2 instance. The later will be the only one responsible for the
sending of notifications and will also be the one running the network
checks.</p>

<p>Icinga2 will be the agent we'll use on all systems to collect
monitoring datas.</p>

<p>We've also settled on the way to secure the communication between our
systems, and decided not to solely rely on icinga2 SSL certificates,
but to harden it using a VPN.</p>

<p>This was also necessary, because we chose to manage our monitoring
system with our current puppetmaster, which is hosted on the monitored
host. So both Icinga2 and Puppet take benefits from this VPN.
<a href="https://labs.riseup.net/code/issues/10760">#10760</a></p>

<p>Still some of the deep details are quite blurry for the reviewer of
this design. We'll leave this discussion open, so that we can go on
with the deployement, while we'll be able discuss some other questions
that may raise later.</p></li>
<li><p>C.2.2. Set up the monitoring software and the underlying infrastructure</p>

<p>We've deployed the VPN between our systems <a href="https://labs.riseup.net/code/issues/11094">#11094</a>,
which lead us to finish the install of the OS on the monitoring
machine. It's now managed by our puppetmaster as any other of our
systems. <a href="https://labs.riseup.net/code/issues/8647">#8647</a></p>

<p>We also installed the VM on our monitored host that will serve as the
satellite relay to our monitoring system. <a href="https://labs.riseup.net/code/issues/10886">#10886</a></p>

<p>We then started writing in our Puppet manifests the recipes we learned
from the monitoring prototype tested on a developer machine. We had
Icinga2 installed on all of our systems with a basic configuration.
Then we configured it on the monitoring system as well as on the VM that
will be the satellite so that they are now both interconnected over
the VPN. <a href="https://labs.riseup.net/code/issues/8648">#8648</a></p>

<p>We still need to connect our Icinga2 agent instances on the rest of
our systems to this Icinga2 network. This will be done in the beginning
of March, and we'll then be able to implement the various checks we
defined in the blueprint, which are part of C.2.4 and C.2.6. Once
done, at the end of March we'll configure the notifications (C.2.5) and
will release our monitoring setup for the end of milestone V (2016,
April 15).</p></li>
</ul>


<h2><a name="index7h2"></a>C.4. Maintain our already existing services</h2>

<p>We kept on answering the requests from the community as well as taking
care of security updates as covered by "C.4.5. Administer our services
up to milestone V".</p>

<p>We also did some background work to keep our infrastructure
sustainable on the long term:</p>

<ul>
<li><p>We made plans to upgrade to Debian 8 (Jessie) the small number of
Debian 7 (Wheezy) systems we still have (<a href="https://labs.riseup.net/code/issues/11178">#11178</a>,
<a href="https://labs.riseup.net/code/issues/11186">#11186</a>).</p></li>
<li><p>We modernized a little bit our Puppet setup. Notably, we converted
it from the deprecated Config File Environments, to the new
Directory Environments.</p></li>
<li><p>We optimized our I/O-bound workloads, by spreading them over
multiple drives in a more efficient way.</p></li>
</ul>


<h1><a name="index4h1"></a>D. Migration to Debian Jessie</h1>

<p>As reported last month, all remaining deliverables were completed
in January.</p>

<p>Still, as a follow-up we upgraded our ISO build system to Debian
Jessie, and then updated our Vagrant basebox and Jenkins ISO builders
accordingly (<a href="https://labs.riseup.net/code/issues/9262">#9262</a>).</p>

<h1><a name="index5h1"></a>E. Release management</h1>

<ul>
<li><p><a href="../../../../news/version_2.0.1.en.html">Tails 2.0.1</a> was released on 2016-02-13 as an
emergency response to CVE-2016-1523 affecting Tor Browser:</p>

<ul>
<li>Enable the Tor Browser's font fingerprinting protections.</li>
<li>Upgrade Tor Browser to 5.5.2.</li>
<li>Repair 32-bit UEFI support.</li>
</ul>
</li>
</ul>


</div>







</div>

<div id="footer" class="pagefooter" role="contentinfo">

<div id="pageinfo">







<div id="backlinks">
Pages linking to this one:

<a href="./2016_03.html">2016 03</a>

<a href="./2016_04.html">2016 04</a>


</div>






</div>
<div id="mirrorlist">Mirror: <a href="https://tails.boum.org/ikiwiki.cgi?do=goto&page=contribute/reports/SponsorS/2015/2016_02">tails.boum.org</a></div>

<!-- from The Amnesic Incognito Live System -->
</div>

</div>

<script type="text/javascript">
  var linkelements = document.querySelectorAll('.use-mirror-pool');
  if(linkelements.length > 0) {
    replaceUrlPrefixWithRandomMirror(linkelements);
  }
</script>

</body>
</html>
