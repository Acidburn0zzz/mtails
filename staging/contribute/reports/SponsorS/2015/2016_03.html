<!DOCTYPE html>

<html lang="en" dir="ltr" xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tails - Tails March 2016 report</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<link rel="icon" href="../../../../favicon.ico" type="image/x-icon" />

<link rel="stylesheet" href="../../../../style.css" type="text/css" />

<link rel="stylesheet" href="../../../../local.css" type="text/css" />


<script src="../../../../lib/js/mirror-dispatcher.js" type="text/javascript"></script>









</head>


<body class="en">


<div class="searchform">



</div>

<div class="banner" role="banner">
  <a class="tails" href="../../../../index.en.html">
    <span class="acronym">Tails</span><br/>
    <span class="slogan">The Amnesic Incognito Live System</span>
  </a>
</div>

<div class="page">

<div class="pageheader">
<div class="header">
<span>
<span class="parentlinks">
<ul id="crumbs">
<li><a href="../../../../index.en.html"><img src="../../../../lib/home.png"></a></li>







<li><a href="../../../../contribute.en.html">contribute</a></li>





<li><a href="../../../reports.html">reports</a></li>





<li><a href="../../SponsorS.html">SponsorS</a></li>





<li><a href="../../../../index.en.html">2015</a></li>




<li>Tails March 2016 report</li>

</ul>
</span>
<span class="title">
Tails March 2016 report
</span>
</span>
</div>










</div>



<div class="sidebar" role="navigation">
<div class="download button">
  <a href="../../../../install.en.html"><span class="download">Install</span>
    <span class="tails">Tails 
3.9
</span>
    <span class="date">
2018-09-05</span></a>
</div>




<div class="links">
  <ul>
    <li><a href="../../../../about.en.html">About</a></li>
    <li><a href="../../../../getting_started.en.html">Getting startedâ€¦</a></li>
    <li><a href="../../../../doc.en.html">Documentation</a></li>
    <li><a href="../../../../support.en.html">Help &amp; Support</a></li>
    <li><a href="../../../../contribute.en.html">Contribute</a></li>
    <li><a href="../../../../news.en.html">News</a></li>
  </ul>
</div>




<div class="donate button">
    <a href="https://tails.boum.org/donate?r=sidebar">Donate</a>
</div>


</div>



<div id="pagebody">

<div id="content" role="main">


<div class="toc">
<ol>
	<li class="L1"><a href="#index1h1">A. Replace Claws Mail with Icedove</a>
	</li>
	<li class="L1"><a href="#index2h1">B. Improve our quality assurance process</a>
	<ol>
		<li class="L2"><a href="#index1h2">B.1. Automatically build ISO images for all the branches of our source code that are under active development</a>
		</li>
		<li class="L2"><a href="#index2h2">B.2. Continuously run our entire test suite on all those ISO images once they are built</a>
		</li>
		<li class="L2"><a href="#index3h2">B.3. Extend the coverage of our test suite</a>
		</li>
		<li class="L2"><a href="#index4h2">B.4. Freezable APT repository</a>
		</li>
	</ol>
	</li>
	<li class="L1"><a href="#index3h1">C. Scale our infrastructure</a>
	<ol>
		<li class="L2"><a href="#index5h2">C.1. Change in depth the infrastructure of our pool of mirrors</a>
		</li>
		<li class="L2"><a href="#index6h2">C.2. Be able to detect within hours failures and malfunction on our services</a>
		</li>
		<li class="L2"><a href="#index7h2">C.4. Maintain our already existing services</a>
		</li>
	</ol>
	</li>
	<li class="L1"><a href="#index4h1">E. Release management</a>
	</li>
</ol>
</div>


<p>This report covers the activity of Tails in March 2016.</p>

<p>Everything in this report is public.</p>

<h1><a name="index1h1"></a>A. Replace Claws Mail with Icedove</h1>

<ul>
<li>A.1.1 Secure the Icedove autoconfig wizard: <a href="https://labs.riseup.net/code/issues/6154">#6154</a></li>
</ul>


<p>The modifications to Thunderbird that we reported last month are still
waiting for review.</p>

<p>We also worked on adjusting some settings in Torbirdy to match our changes to
the automatic email creation wizard in Thunderbird, in order to benefit
from both. We've made a lot of progress on adapting Torbirdy's code (<a href="https://labs.riseup.net/code/issues/11204">#11204</a>) and
have sent the
<a href="https://github.com/ioerror/torbirdy/pull/30">modifications upstream</a>.</p>

<p>We set up a development branch which integrates all these
modifications in Tails, uses only secure protocols and the configured
proxy while still
allowing the user to benefit from the automatic email creation wizard. However,
we're hesitating to release because we want the Icedove and Torbirdy parts to be
upstreamed first, so we don't risk releasing something that would change on the
user's end if upstream prefers a different implementation (e.g. a
different GUI). For example, Thunderbird upstream has not yet agreed to our
proposal of implementing a check box which allows the user to select or deselect "Only
use secure protocols".</p>

<p>Ideally, we would like to release these modifications in Tails 2.4
release (June 7). But as said, we'd like to have more comments from
Thunderbird beforehand.</p>

<h1><a name="index2h1"></a>B. Improve our quality assurance process</h1>

<h2><a name="index1h2"></a>B.1. Automatically build ISO images for all the branches of our source code that are under active development</h2>

<p>In March, <strong>839 ISO images</strong> were automatically built by our Jenkins
instance.</p>

<h2><a name="index2h2"></a>B.2. Continuously run our entire test suite on all those ISO images once they are built</h2>

<p>In March, <strong>834 ISO images</strong> were automatically tested by our Jenkins
instance.</p>

<ul>
<li><p>B.2.4. Implement and deploy the best solution from this research: <a href="https://labs.riseup.net/code/issues/5288">#5288</a></p>

<p>Given the workload on other deliverables, we postponed the
triaging of the false positives generated by our test
infrastructure in February and
will triage them at the same time as the ones from March. (<a href="https://labs.riseup.net/code/issues/11083">#11083</a> and <a href="https://labs.riseup.net/code/issues/11084">#11084</a>)</p>

<p>We rejected a bug in the Cucumber plugin of Jenkins that didn't
reappear recently (<a href="https://labs.riseup.net/code/issues/10725">#10725</a>). The same is likely to
happen to <a href="https://labs.riseup.net/code/issues/10601">#10601</a>.</p></li>
</ul>


<h2><a name="index3h2"></a>B.3. Extend the coverage of our test suite</h2>

<h3><a name="index1h3"></a>B.3.11. Fix newly identified issues to make our test suite more robust and faster</h3>

<ul>
<li><p>Robustness improvements</p>

<p>As discussed <a href="./2016_02.html#index3h2">last month</a>, this month has
been spent on trying out new "fundamental approaches" to deal with
our robustness issues. Specifically, we looked at dealing with
"glitches when interacting with graphical user interfaces" and
found a suitable solution in
<a href="https://fedorahosted.org/dogtail/">Dogtail</a>, an automated GUI
testing framework based on assistive technologies (specifically
a11y). (<a href="https://labs.riseup.net/code/issues/10721">#10721</a>)</p>

<p>We developed a simple interface in our test suite to generate
and run Dogtail scripts inside the system under test, so elements of
the graphical user interface can be identified <em>programmatically</em>
and then interacted with much like before (e.g. clicked with the
mouse or typed text into). Previously we could only identify such
elements using static images that had to exactly match what we see
on the screen, which often turned out to not be the case due to the
non-deterministic nature of modern desktop applications, and this
new approach already shows promise on being more reliable.</p>

<p>Furthermore, being able to identify elements with code instead of
images will significantly decrease the maintenance burden;
previously we've had to update images whenever something changes in
the GUI, e.g. size or anti-aliazing changes for fonts, whereas we
now only need to change if the program itself changes. Also, when
reading the code, referring to an image is much more opaque than a
programmatic description, making the code more readable.</p>

<p>Next month's focus will be to deal with "transient network
issues" (<a href="https://labs.riseup.net/code/issues/9521">#9521</a>).</p></li>
<li><p>Performance improvements on Jenkins</p>

<p>Last month, we started optimizing the platform that runs our test
suite to make it run faster. As planned, in March we came back to
it and measurements showed that real workloads indeed benefit from
these changes (<a href="https://labs.riseup.net/code/issues/11175">#11175</a>, <a href="https://labs.riseup.net/code/issues/11113">#11113</a>).</p></li>
</ul>


<h2><a name="index4h2"></a>B.4. Freezable APT repository</h2>

<p>We now have a working proof-of-concept for all essential pieces of
infrastructure and code, except for some bits of the "tagged snapshots" component
which is actually not needed to achieve ours goals for this year.</p>

<p>The progress made in March matches the updated development schedule that we
shared <a href="./2016_02.html#index4h2">last month</a> and
the goals we set back then still seem realistic.</p>

<p>Now, into the details:</p>

<ul>
<li><p>B.4.1. Specify when we want to import foreign packages into which APT suites (<a href="https://labs.riseup.net/code/issues/9488">#9488</a>)
and B.4.4. Design freezable APT repository (<a href="https://labs.riseup.net/code/issues/9487">#9487</a>)</p>

<p>We <a href="https://mailman.boum.org/pipermail/tails-dev/2016-March/010369.html">discussed</a>
our design and validated it. Proof-of-concept implementations
also confirm the soundness of large parts of this design. So we now consider
these two deliverables as done.</p></li>
<li><p>B.4.2. Implement a mechanism to save the list of packages used at ISO build time (<a href="https://labs.riseup.net/code/issues/10748">#10748</a>, <a href="https://labs.riseup.net/code/issues/10749">#10749</a>)</p>

<p>We made great progress on this front. We added support for storing the
architecture information about packages used at build time, in preparation for
(unrelated) upcoming changes that will make the Tails build process fetch
packages for multiple architectures. We made our code and design evolve a bit
after more intensive testing that highlighted a few problems.</p>

<p>We still have to do some polishing but are happy with how this component
works now. We still aim at having this work merged in April, ideally in time
for Tails 2.3 (April 19).</p>

<p>This will allow us to store, virtually forever, all the packages needed to build
a given Tails release.</p></li>
<li><p>B.4.3. Centralize and merge the list of needed packages</p>

<p>With our current design, the original definition of this deliverable
doesn't make sense anymore. We replaced it with processes and tools that
our release managers can use to:</p>

<ul>
<li><p>Allow storing APT snapshots longer than the default when needed. For
example to store the snapshots used during a code freeze that lasts
longer than usual and prevent them from being deleted by our garbage
collector.</p></li>
<li><p>Freeze and unfreeze the APT snapshots used by a branch when needed.</p></li>
</ul>


<p>The corresponding scripts were drafted
(<a href="https://git-tails.immerda.ch/tails/tree/auto/scripts/apt-snapshots-serials?h=feature/build-from-snapshots">build-from-snapshots</a>,
<a href="https://git-tails.immerda.ch/puppet-tails/tree/files/reprepro/snapshots/time_based/tails-bump-apt-snapshot-valid-until">tails-bump-apt-snapshot-valid-until</a>)
and passed early testing.</p></li>
<li><p>B.4.5. Implement processes and tools for importing and freezing those packages (<a href="https://labs.riseup.net/code/issues/6299">#6299</a>, <a href="https://labs.riseup.net/code/issues/6296">#6296</a>)</p>

<p>Time-based snapshots are now generated four times a day and
<a href="http://time-based.snapshots.deb.tails.boum.org/">published over HTTP</a>.
We designed how to do garbage collection on these snapshots and have a <a href="https://git-tails.immerda.ch/puppet-tails/tree/files/reprepro/snapshots/time_based/tails-delete-expired-apt-snapshots">draft
implementation</a>.
This infrastructure is described with and managed by a <a href="https://git-tails.immerda.ch/puppet-tails/tree/manifests/reprepro">Puppet
manifest</a>.</p>

<p>We successfully built a Tails ISO image using time-based APT snapshots:
<a href="https://git-tails.immerda.ch/tails/log/?h=feature/build-from-snapshots">feature/build-from-snapshots</a>! This was a great
success that validated a large chunk of our previous
work in a production context.</p>

<p>This lead us to identify that if we didn't do anything about it,
<code>apt-cacher-ng</code>, the caching proxy used to speed up building Tails ISO images,
would not only become mostly useless, but would
also quickly consume too much disk space. It took us some time but we
now have a proof-of-concept to solve this problem. The next step
is to integrate our proof-of-concept into the various configuration
used to build a Tails ISO image.</p></li>
<li><p>B.4.6. Adjust the rest of our ecosystem to the freezable APT repository (<a href="https://labs.riseup.net/code/issues/6303">#6303</a>)</p>

<p>We investigated more closely what exact changes remain to be done, adjusted
our backup system, and ensured that our plans for a fail-over system already
take into account the needs of our upcoming freezable APT repository.</p>

<p>We still have to purchase a hard-drive for an additional set of
backups, but this is a minor issue and we consider this deliverable as
basically done at this point.</p></li>
</ul>


<h1><a name="index3h1"></a>C. Scale our infrastructure</h1>

<h2><a name="index5h2"></a>C.1. Change in depth the infrastructure of our pool of mirrors</h2>

<p>Not much progress was made on this front in March, but as announced last
month, this will be one of our primary focuses in April. Still, a bit of
work was done:</p>

<ul>
<li><p>C.1.1. Specify a way of describing the pool of mirrors (<a href="https://labs.riseup.net/code/issues/8637">#8637</a>, <a href="https://labs.riseup.net/code/issues/10284">#10284</a>)</p>

<p>The design proposed in February was reviewed and validated. So this
deliverable is now done.</p></li>
<li><p>C.1.2. Write &amp; audit the code that makes the redirection decision from our website (<a href="https://labs.riseup.net/code/issues/8639">#8639</a>, <a href="https://labs.riseup.net/code/issues/8640">#8640</a>, <a href="https://labs.riseup.net/code/issues/11109">#11109</a>)</p>

<p>We found someone who has the skills and the desire to audit our
JavaScript code.</p></li>
<li><p>C.1.4. Communicate with each mirror operator to adapt their configuration (<a href="https://labs.riseup.net/code/issues/8635">#8635</a>, <a href="https://labs.riseup.net/code/issues/11079">#11079</a>)</p>

<p>We prepared a call for mirrors by gathering a list of potential big
hosts and drafting a text.</p></li>
<li><p>C.1.7. Adjust update-description files for incremental upgrades</p>

<p>With our current design, the original definition of this deliverable
doesn't make sense anymore. We will instead adjust the code of Tails
Upgrader to the new mirror pool (<a href="https://labs.riseup.net/code/issues/11123">#11123</a>).</p></li>
</ul>


<p>What we aim to do in April:</p>

<ul>
<li>Submit a prototype of the changes needed in our ISO Verification
Extension for code review and security audit (<a href="https://labs.riseup.net/code/issues/11109">#11109</a>, part of C.1.2).</li>
<li>Ask all mirror operators to switch to a new virtual host name
(<a href="https://labs.riseup.net/code/issues/11055">#11055</a>, part of C.1.4).</li>
<li>Prototype the changes needed in Tails Upgrader (<a href="https://labs.riseup.net/code/issues/11123">#11123</a>, part of C.1.7).</li>
</ul>


<p>And if time allows:</p>

<ul>
<li>Send our call for new mirrors (<a href="https://labs.riseup.net/code/issues/11079">#11079</a>, part of C.1.4).</li>
<li>Prepare our new fallback pool based on DNS (<a href="https://labs.riseup.net/code/issues/10295">#10295</a>,
pre-requisite of C.1.5).</li>
</ul>


<p>We aim to deploy the new mirror pool in May but, if we are delayed, the
deployment might have to wait until July.</p>

<h2><a name="index6h2"></a>C.2. Be able to detect within hours failures and malfunction on our services</h2>

<ul>
<li><p>C.2.2. Set up the monitoring software and the underlying infrastructure</p>

<p>We configured half of our monitored systems as Icinga2 agents
reporting to a <em>satellite</em> (as described <a href="./2016_02.html#index6h2">last
month</a>).
To do this, we wrote a second batch of Puppet manifests which will
make it faster to configure the second half. Configuring the second
half will also debug our automated deployment procedures.</p>

<p>The satellite is collecting the reports and pushing them to our
monitoring system. This way, our infrastructure hosted on one host
is isolated from the external monitoring host, which can't execute
code on the monitoring systems and only collects results pushed by the
satellite.</p>

<p>We also prefer to use Puppet to spread the configuration, so that we
don't have to use the mechanisms available in Icinga2 to do so,
isolating a bit more both hosts.</p>

<p>We set up an Icingaweb2 interface on <a href="https://icingaweb2.tails.boum.org/">https://icingaweb2.tails.boum.org/</a>.</p></li>
<li><p>C.2.4. Configure and debug the monitoring of the most critical
services and C.2.6. Configure and debug the monitoring of other
high-priority services</p>

<p>We deployed basic system checks and set up our monitoring host to check
public services remotely. These checks were already helpful by warning
us that some of our partitions were running out of disk space.</p>

<p>We deployed most of the checks defined as <code>CRITICAL</code> and <code>HIGH PRIORITY</code>.
(<a href="https://labs.riseup.net/code/issues/8650">#8650</a>, <a href="https://labs.riseup.net/code/issues/8653">#8653</a>)</p></li>
</ul>


<h2><a name="index7h2"></a>C.4. Maintain our already existing services</h2>

<p>We kept on answering the requests from the community and taking
care of security updates as covered by "C.4.5. Administer our services
up to milestone V".</p>

<p>We upgraded all our remaining Debian 7 (Wheezy) to Debian 8 (Jessie)
(<a href="https://labs.riseup.net/code/issues/11178">#11178</a>, <a href="https://labs.riseup.net/code/issues/11186">#11186</a>). This fixed a bug
that prevented us to upgrade the Linux kernel running on all our ISO
tester virtual machines (<a href="https://labs.riseup.net/code/issues/9157">#9157</a>).</p>

<h1><a name="index4h1"></a>E. Release management</h1>

<ul>
<li><p><a href="../../../../news/version_2.2.en.html">Tails 2.2</a> was released on 2016-03-08.</p></li>
<li><p><a href="../../../../news/version_2.2.1.en.html">Tails 2.2.1</a> was released as an emergency
release on 2016-03-18.</p></li>
</ul>


</div>







</div>

<div id="footer" class="pagefooter" role="contentinfo">

<div id="pageinfo">







<div id="backlinks">
Pages linking to this one:

<a href="./2016_04.html">2016 04</a>

<a href="./2016_05.html">2016 05</a>

<a href="../../../../news/report_2016_03.html">news/report 2016 03</a>


</div>






</div>
<div id="mirrorlist">Mirror: <a href="https://tails.boum.org/ikiwiki.cgi?do=goto&page=contribute/reports/SponsorS/2015/2016_03">tails.boum.org</a></div>

<!-- from The Amnesic Incognito Live System -->
</div>

</div>

<script type="text/javascript">
  var linkelements = document.querySelectorAll('.use-mirror-pool');
  if(linkelements.length > 0) {
    replaceUrlPrefixWithRandomMirror(linkelements);
  }
</script>

</body>
</html>
