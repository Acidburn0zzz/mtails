<!DOCTYPE html>

<html lang="en" dir="ltr" xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tails - Tails May 2016 report</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<link rel="icon" href="../../../../favicon.ico" type="image/x-icon" />

<link rel="stylesheet" href="../../../../style.css" type="text/css" />

<link rel="stylesheet" href="../../../../local.css" type="text/css" />


<script src="../../../../lib/js/mirror-dispatcher.js" type="text/javascript"></script>









</head>


<body class="en">


<div class="searchform">



</div>

<div class="banner" role="banner">
  <a class="tails" href="../../../../index.en.html">
    <span class="acronym">Tails</span><br/>
    <span class="slogan">The Amnesic Incognito Live System</span>
  </a>
</div>

<div class="page">

<div class="pageheader">
<div class="header">
<span>
<span class="parentlinks">
<ul id="crumbs">
<li><a href="../../../../index.en.html"><img src="../../../../lib/home.png"></a></li>







<li><a href="../../../../contribute.en.html">contribute</a></li>





<li><a href="../../../reports.html">reports</a></li>





<li><a href="../../SponsorS.html">SponsorS</a></li>





<li><a href="../../../../index.en.html">2015</a></li>




<li>Tails May 2016 report</li>

</ul>
</span>
<span class="title">
Tails May 2016 report
</span>
</span>
</div>










</div>



<div class="sidebar" role="navigation">
<div class="download button">
  <a href="../../../../install.en.html"><span class="download">Install</span>
    <span class="tails">Tails 
3.9
</span>
    <span class="date">
2018-09-05</span></a>
</div>




<div class="links">
  <ul>
    <li><a href="../../../../about.en.html">About</a></li>
    <li><a href="../../../../getting_started.en.html">Getting startedâ€¦</a></li>
    <li><a href="../../../../doc.en.html">Documentation</a></li>
    <li><a href="../../../../support.en.html">Help &amp; Support</a></li>
    <li><a href="../../../../contribute.en.html">Contribute</a></li>
    <li><a href="../../../../news.en.html">News</a></li>
  </ul>
</div>




<div class="donate button">
    <a href="https://tails.boum.org/donate?r=sidebar">Donate</a>
</div>


</div>



<div id="pagebody">

<div id="content" role="main">


<div class="toc">
<ol>
	<li class="L1"><a href="#index1h1">A. Replace Claws Mail with Icedove</a>
	<ol>
		<li class="L2"><a href="#index1h2">A.1.1. Secure the Icedove autoconfig wizard</a>
		</li>
		<li class="L2"><a href="#index2h2">A.1.2. Make our improvements maintainable for future versions of Icedove</a>
		</li>
	</ol>
	</li>
	<li class="L1"><a href="#index2h1">B. Improve our quality assurance process</a>
	<ol>
		<li class="L2"><a href="#index3h2">B.3. Extend the coverage of our test suite</a>
		</li>
		<li class="L2"><a href="#index4h2">B.4. Freezable APT repository</a>
		</li>
	</ol>
	</li>
	<li class="L1"><a href="#index3h1">C. Scale our infrastructure</a>
	<ol>
		<li class="L2"><a href="#index5h2">C.1. Change in depth the infrastructure of our pool of mirrors</a>
		</li>
		<li class="L2"><a href="#index6h2">C.4. Maintain our already existing services</a>
		</li>
	</ol>
	</li>
	<li class="L1"><a href="#index4h1">E. Release management</a>
	</li>
</ol>
</div>


<p>This report covers the activity of Tails in May 2016.</p>

<p>Everything in this report is public.</p>

<h1><a name="index1h1"></a>A. Replace Claws Mail with Icedove</h1>

<h2><a name="index1h2"></a>A.1.1. Secure the Icedove autoconfig wizard</h2>

<p>Tails 2.4 has been released with our proper patches which provide the
possibility to use the automatic account configuration of Icedove to
discover email server configurations only, and by default, over a secure
connection and furthermore accepting only secure options to configure
the account. (<a href="https://labs.riseup.net/code/issues/6158">#6158</a>, <a href="https://labs.riseup.net/code/issues/6369">#6369</a>)</p>

<p>This milestone is now completed.</p>

<h2><a name="index2h2"></a>A.1.2. Make our improvements maintainable for future versions of Icedove</h2>

<p>On the upstream side, our patches to Thunderbird have finally been
reviewed (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=971347">https://bugzilla.mozilla.org/show_bug.cgi?id=971347</a>). A
second iteration of patches has been sent to upstream, after a first
review. As of today, the upstream requests mostly code style
modifications so that we're now confident that upstream wants and will
include our patches very soon.</p>

<p>Our patches to TorBirdy have all been merged and we're now simply
waiting for a new release of the software. This will allow us to drop
our custom built packages and use the default Debian one, once it's
published.</p>

<p>This milestone is nearly completed and we hope that we can mark it as
done before the next report.</p>

<p>We've changed Enigmail's settings in order to use keyservers only over
HTTPS (<a href="https://labs.riseup.net/code/issues/10906">#10906</a>) and modified our user documentation
accordingly. (<a href="https://labs.riseup.net/code/issues/11125">#11125</a>)</p>

<h1><a name="index2h1"></a>B. Improve our quality assurance process</h1>

<h2><a name="index3h2"></a>B.3. Extend the coverage of our test suite</h2>

<h3><a name="index1h3"></a>B.3.11. Fix newly identified issues to make our test suite more robust and faster</h3>

<ul>
<li><p>Robustness improvements</p>

<p>The work that we did over the last two months on Chutney (<a href="https://labs.riseup.net/code/issues/9521">#9521</a>), for Tor simulation, and Dogtail (<a href="https://labs.riseup.net/code/issues/10721">#10721</a>), for
automated interaction with graphical interfaces, has started to pay off.</p>

<p>Since mid-April, over 60 scenarios have been made reliable and enabled in our
main development branch. The vast majority of these scenarios comes from
Chutney, for Tor simulation, as we could reuse the existing tests without
modification, except in a few edge cases. Now, most of the problems that with
had related to transient network issues are solved.</p>

<p>For the end of this project, we will focus on Dogtail to solve glitches when
interacting with graphical user interfaces. This requires rewriting the
problematic parts of tests under a completely different paradigm.</p></li>
</ul>


<h3><a name="index2h3"></a>B.3.14. Write tests for incremental upgrades (<a href="https://labs.riseup.net/code/issues/#6309">##6309</a>)</h3>

<p>  This test has been carefully designed in such a way that it can be
  applied on <em>any</em> Tails version -- normally these upgrades can only
  be applied to a specific Tails version. This was the main difficulty
  in this work, and with that solved, the implementation is simple,
  and will be finished in early June.</p>

<h2><a name="index4h2"></a>B.4. Freezable APT repository</h2>

<p>The work we have done has been reviewed, merged into the our main
development branch, and successfully used while preparing Tails
2.4~rc1. Unsurprisingly, we had to fix a couple of small bugs that
earlier testing had not discovered, but all in all we are very
satisfied with the results: it has been very solid and
performed pretty well so far. We are proud to point to the first ever
tagged snapshot, that contains only the set of packages needed for
building Tails 2.4~rc1, and the corresponding source code:
<a href="http://tagged.snapshots.deb.tails.boum.org/2.4-rc1/">http://tagged.snapshots.deb.tails.boum.org/2.4-rc1/</a>.</p>

<p>Now, let's dive into the details:</p>

<ul>
<li><p>B.4.3. Centralize and merge the list of needed packages</p>

<p>As <a href="./2016_03.html#index4h2">explained previously</a>,
the original definition of this deliverable doesn't make sense
anymore, so here we are reporting about what now replaces it:</p>

<ul>
<li><p>Allow storing APT snapshots longer than the default when needed:
the code was reviewed, merged, and successfully used in production
while preparing Tails 2.4~rc1, so this is completed.</p></li>
<li><p>Freeze and unfreeze the APT snapshots used by a branch when
needed: the code and corresponding documentation were reviewed,
merged, and used in production, so this is completed.</p></li>
</ul>


<p>So we are happy to report that deliverable B.4.3 was completed in May.</p></li>
<li><p>B.4.5. Implement processes and tools for importing and freezing those packages (<a href="https://labs.riseup.net/code/issues/6299">#6299</a>, <a href="https://labs.riseup.net/code/issues/6296">#6296</a>)</p>

<p>As <a href="./2016_04.html">said last month</a>, the
last remaining bits here are about handling some consequences on
this system:</p>

<ul>
<li><p>Garbage collection of APT repository snapshots: this was deployed
in production and works fine.</p></li>
<li><p>Manage a very custom configuration for <code>apt-cacher-ng</code>: this was
reviewed, merged, and used in production since then.</p></li>
<li><p>Manage the growth of the database of <code>reprepro</code>: we checked the actual data
in our production environment and realized that there is actually
no problem to be solved here; since we have enabled garbage
collection, the database has not grown at all.</p></li>
</ul>
</li>
<li><p>Miscellaneous follow-ups</p>

<p>We have submitted upstream three branches that improve the Puppet
module that we use to manage <code>reprepro</code> in ways that made it compatible
with the needs of our freezable APT repository.</p>

<p>By the end of July, we will also do some polishing in various areas:</p>

<ul>
<li><p>Polish a bit the design documentation for the entire setup
(<a href="https://labs.riseup.net/code/issues/11447">#11447</a>).</p></li>
<li><p>If needed, write helper tools for freeze exceptions
(<a href="https://labs.riseup.net/code/issues/11448">#11448</a>).</p></li>
<li><p>Investigate a weird issue we have identified, when a package is
not removed from our time-based APT snapshots, while it should be
(<a href="https://labs.riseup.net/code/issues/11496">#11496</a>).</p></li>
</ul>
</li>
</ul>


<h1><a name="index3h1"></a>C. Scale our infrastructure</h1>

<h2><a name="index5h2"></a>C.1. Change in depth the infrastructure of our pool of mirrors</h2>

<p>The new mirror pool is now used by <em>Tails Upgrader</em> and the downloads from our
website that are not supported by our <em>Download And Verification Extension</em>
(DAVE) for Firefox, (for example release candidates) when JavaScript is enabled
in the browser. We still have to make DAVE use the new pool of mirrors.</p>

<ul>
<li><p>C.1.2. Write &amp; audit the code that makes the redirection decision from our website (<a href="https://labs.riseup.net/code/issues/8639">#8639</a>, <a href="https://labs.riseup.net/code/issues/8640">#8640</a>, <a href="https://labs.riseup.net/code/issues/11109">#11109</a>)</p>

<ul>
<li><p><code>mirror-dispatcher.js</code>: we are still waiting for the auditor to do
a final security review.</p></li>
<li><p>Download And Verification Extension (DAVE) for Firefox: we have made great
progress. However,
we still need to ensure that, once a mirror is deleted, DAVE will be able to
resume a download that was started from another mirror.
We coordinated with the person who will do the code review to ensure
he will be available when needed.</p></li>
</ul>
</li>
<li><p>C.1.4. Communicate with each mirror operator to adapt their configuration (<a href="https://labs.riseup.net/code/issues/8635">#8635</a>, <a href="https://labs.riseup.net/code/issues/11079">#11079</a>)</p>

<p>This deliverable is completed:</p>

<ul>
<li><p>All mirrors have implemented the requested changes.</p></li>
<li><p>We sent a call for help to a number of fast mirror
operators and already have 7 more mirrors. We will pursue this
effort in June, even though we already reached the goals we
had set: we expected to have at least 30 mirrors in the pool once
the new infrastructure was ready, and 35 mirrors 3 months later,
and we already have 36 active mirrors as of May 31.</p></li>
</ul>
</li>
<li><p>C.1.6. Adjust download documentation to point to the mirror pool dispatcher's URL (<a href="https://labs.riseup.net/code/issues/8642">#8642</a>, <a href="https://labs.riseup.net/code/issues/11329">#11329</a>, <a href="https://labs.riseup.net/code/issues/10295">#10295</a>)</p>

<p>This was deployed to production: all links pointing to our mirror
pool now use the new redirection system.</p>

<p>So, this deliverable is now completed.</p></li>
<li><p>C.1.7. Adjust update-description files for incremental upgrades (<a href="https://labs.riseup.net/code/issues/11123">#11123</a>)</p>

<p>We have adjusted the code of Tails Upgrader to use the new mirror
pool. This code has been merged and is now used by Tails Upgrader
in production (starting with Tails 2.4~rc1), so this deliverable is
completed as well.</p></li>
<li><p>C.1.8. Clean up the remainders of the old mirror pool setup (<a href="https://labs.riseup.net/code/issues/8643">#8643</a>, <a href="https://labs.riseup.net/code/issues/11284">#11284</a>)</p>

<p>This is now only blocked by the work that is in progress on DAVE
(C.1.2).</p></li>
</ul>


<h2><a name="index6h2"></a>C.4. Maintain our already existing services</h2>

<ul>
<li><p>C.4.6. Administer our services up to milestone VI</p>

<p>We kept on answering the requests from the community and taking care
of security updates.</p>

<p>We noticed that old Puppet reports were not cleaned up as they
should on our infrastructure, so we fixed this and submitted a merge
request to the Puppet module we use to manageâ€¦ Puppet itself
(<a href="https://labs.riseup.net/code/issues/11468">#11468</a>).</p>

<p>We noticed that the four newest virtual machines which
continuously run our automated test suite on all ISO images built by
our Jenkins instance (B.2) did not reboot as intended between test
suite runs. We investigated the root cause of the problem and fixed
it (<a href="https://labs.riseup.net/code/issues/11467">#11467</a>).</p>

<p>We ported different elements of our Puppet infrastructure
to use <a href="https://github.com/puppetlabs/hiera">Hiera</a>.
Not only this simplified a lot how we manage systems, but more
importantly, this allowed us to release quite a bit more of our
Puppet code. This is part of our strategy to treat infrastructure as
code and to enable more people to contribute to it without needing
any special credentials.</p>

<p>We streamlined email reporting from failed cronjobs across our
infrastructure, to ensure we get all notifications.</p>

<p>We did lots of refactoring and miscellaneous clean ups in our Puppet
code. Sprint cleaning!</p></li>
</ul>


<h1><a name="index4h1"></a>E. Release management</h1>

<p><a href="../../../../news/test_2.4-rc1.html">Tails 2.4~rc1</a> was released for testing on May 26.</p>

</div>







</div>

<div id="footer" class="pagefooter" role="contentinfo">

<div id="pageinfo">












</div>
<div id="mirrorlist">Mirror: <a href="https://tails.boum.org/ikiwiki.cgi?do=goto&page=contribute/reports/SponsorS/2015/2016_05">tails.boum.org</a></div>

<!-- from The Amnesic Incognito Live System -->
</div>

</div>

<script type="text/javascript">
  var linkelements = document.querySelectorAll('.use-mirror-pool');
  if(linkelements.length > 0) {
    replaceUrlPrefixWithRandomMirror(linkelements);
  }
</script>

</body>
</html>
