<!DOCTYPE html>

<html lang="en" dir="ltr" xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tails - Tails December 2015 report</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<link rel="icon" href="../../../../favicon.ico" type="image/x-icon" />

<link rel="stylesheet" href="../../../../style.css" type="text/css" />

<link rel="stylesheet" href="../../../../local.css" type="text/css" />


<script src="../../../../lib/js/mirror-dispatcher.js" type="text/javascript"></script>









</head>


<body class="en">


<div class="searchform">



</div>

<div class="banner" role="banner">
  <a class="tails" href="../../../../index.en.html">
    <span class="acronym">Tails</span><br/>
    <span class="slogan">The Amnesic Incognito Live System</span>
  </a>
</div>

<div class="page">

<div class="pageheader">
<div class="header">
<span>
<span class="parentlinks">
<ul id="crumbs">
<li><a href="../../../../index.en.html"><img src="../../../../lib/home.png"></a></li>







<li><a href="../../../../contribute.en.html">contribute</a></li>





<li><a href="../../../reports.html">reports</a></li>





<li><a href="../../SponsorS.html">SponsorS</a></li>





<li><a href="../../../../index.en.html">2015</a></li>




<li>Tails December 2015 report</li>

</ul>
</span>
<span class="title">
Tails December 2015 report
</span>
</span>
</div>










</div>



<div class="sidebar" role="navigation">
<div class="download button">
  <a href="../../../../install.en.html"><span class="download">Install</span>
    <span class="tails">Tails 
3.9
</span>
    <span class="date">
2018-09-05</span></a>
</div>




<div class="links">
  <ul>
    <li><a href="../../../../about.en.html">About</a></li>
    <li><a href="../../../../getting_started.en.html">Getting startedâ€¦</a></li>
    <li><a href="../../../../doc.en.html">Documentation</a></li>
    <li><a href="../../../../support.en.html">Help &amp; Support</a></li>
    <li><a href="../../../../contribute.en.html">Contribute</a></li>
    <li><a href="../../../../news.en.html">News</a></li>
  </ul>
</div>




<div class="donate button">
    <a href="https://tails.boum.org/donate?r=sidebar">Donate</a>
</div>


</div>



<div id="pagebody">

<div id="content" role="main">


<div class="toc">
<ol>
	<li class="L1"><a href="#index1h1">A. Replace Claws Mail with Icedove</a>
	<ol>
		<li class="L2"><a href="#index1h2">A.1.2 Make our improvements maintainable for future versions of Icedove</a>
		</li>
		<li class="L2"><a href="#index2h2">A.1.3 Integrate Icedove into Tails</a>
		</li>
		<li class="L2"><a href="#index3h2">A.1.4 Provide a migration path for our users from Claws Mail to Icedove</a>
		</li>
	</ol>
	</li>
	<li class="L1"><a href="#index2h1">B. Improve our quality assurance process</a>
	<ol>
		<li class="L2"><a href="#index4h2">B.1. Automatically build ISO images for all the branches of our source code that are under active development</a>
		</li>
		<li class="L2"><a href="#index5h2">B.2. Continuously run our entire test suite on all those ISO images once they are built</a>
		</li>
		<li class="L2"><a href="#index6h2">B.3. Extend the coverage of our test suite</a>
		</li>
		<li class="L2"><a href="#index7h2">B.4. Freezable APT repository</a>
		</li>
	</ol>
	</li>
	<li class="L1"><a href="#index3h1">C. Scale our infrastructure</a>
	<ol>
		<li class="L2"><a href="#index8h2">C.2. Be able to detect within hours failures and malfunction on our services</a>
		</li>
		<li class="L2"><a href="#index9h2">C.4. Maintain our already existing services</a>
		</li>
	</ol>
	</li>
	<li class="L1"><a href="#index4h1">D. Migration to Debian Jessie</a>
	<ol>
		<li class="L2"><a href="#index10h2">D.2. Take advantage of systemd to improve the internals of Tails</a>
		</li>
		<li class="L2"><a href="#index11h2">D.3. Update our test suite for Tails Jessie</a>
		</li>
		<li class="L2"><a href="#index12h2">D.4. Document the changes implied by the move to Jessie on our website</a>
		</li>
		<li class="L2"><a href="#index13h2">D.5. Release an official version of Tails based on Jessie</a>
		</li>
		<li class="L2"><a href="#index14h2">Various porting to Jessie</a>
		</li>
	</ol>
	</li>
	<li class="L1"><a href="#index5h1">E. Release management</a>
	</li>
</ol>
</div>


<p>This reports covers the activity of Tails in December 2015.</p>

<p>Everything in this report can be made public.</p>

<h1><a name="index1h1"></a>A. Replace Claws Mail with Icedove</h1>

<p>Timing-wised, for this deliverable we are working with a more
<a href="https://mailman.boum.org/pipermail/tails-icedove/2015-December/000108.html">incremental schedule</a>
than what was planned initially. Instead of completing all the work
for milestone IV (2016, January 15):</p>

<ul>
<li><p>We released Icedove in Tails way ahead of schedule, as reported two
months ago (A.1.3, A.1.5).</p></li>
<li><p>With respect to securing the Icedove autoconfig wizard (A.1.1), the
remaining work will be spread over the next few months: first, we
aim at having a proof-of-concept branch, that integrates the
secured wizard into Tails, ready by the end of the month; second,
we want to release this feature in Tails 2.2 (early March); third,
the process of trying to have our patches merged upstream (A.1.2)
has started, and will span over the next months.</p></li>
</ul>


<h2><a name="index1h2"></a>A.1.2 Make our improvements maintainable for future versions of Icedove</h2>

<p>   We've been following up on upstreaming patches from
   <a href="https://trac.torproject.org/projects/tor/raw-attachment/wiki/doc/TorifyHOWTO/EMail/Thunderbird/Thunderbird%2BTor.pdf">tagnaq's paper</a>
   and are happy to see that two of them were included upstream.
   (<a href="https://labs.riseup.net/code/issues/6150">#6150</a>)</p>

<ul>
<li> <code>Date</code> headers are sanitized with a <a href="https://trac.torproject.org/6314">JS patch in
 TorBirdy</a>.</li>
<li> <code>Message-ID</code> headers are fixed with a <a href="https://hg.mozilla.org/comm-central/rev/a8573d4c67292962f9dd9b8f51496e9f62bbedb7">C++ patch in Thunderbird
 45</a>.</li>
</ul>


<p>   In order to make our improvements maintainable we've got
   in touch with the Debian Icedove packaging team and written manual tests for
   testing Icedove in Tails. (<a href="https://labs.riseup.net/code/issues/9493">#9493</a>)</p>

<p>   These still have to be converted to automated tests in our test suite.
   (<a href="https://labs.riseup.net/code/issues/6304">#6304</a>)</p>

<h2><a name="index2h2"></a>A.1.3 Integrate Icedove into Tails</h2>

<p>   Since 1.8 we advertise Icedove to our users as the default email client in
   Tails. Claws Mail will be removed in the next release of Tails, version 2.0.
   Users can now use the Icedove persistence feature.</p>

<h2><a name="index3h2"></a>A.1.4 Provide a migration path for our users from Claws Mail to Icedove</h2>

<p>This was completed when Icedove became the default email client.</p>

<h1><a name="index2h1"></a>B. Improve our quality assurance process</h1>

<h2><a name="index4h2"></a>B.1. Automatically build ISO images for all the branches of our source code that are under active development</h2>

<p>In December, <strong>809 ISO images</strong> were automatically built by our Jenkins
instance.</p>

<h2><a name="index5h2"></a>B.2. Continuously run our entire test suite on all those ISO images once they are built</h2>

<p>In December, <strong>788 ISO images</strong> were tested by our Jenkins instance.</p>

<ul>
<li><p>B.2.4. Implement and deploy the best solution from this research</p>

<p>We went on with the effort we started in October, to identify test
cases that prove to be fragile in our CI environment, that were
blocking us from notifying contributors when tests fail there.
And finally, we reached the point when we felt comfortable with the
subset of our automated test suite we deem to be robust, and
unleashed these notifications to the greater Tails community
(<a href="https://mailman.boum.org/pipermail/tails-dev/2015-December/009931.html">announce</a>).
We will now go on working on making as much of our test suite robust enough
to be suitable for running in this context (B.3.11, see below).
(<a href="https://labs.riseup.net/code/issues/10296">#10296</a> and <a href="https://labs.riseup.net/code/issues/10382">#10382</a>)</p>

<p>Other than that, our testing setup has seen quite some polishing all
over the place, that we are going to sum up now.</p>

<p>As a way to optimize resource usage and to shorten the feedback
loop, we have limited the amount of tests we run on ISO images built from
documentation branches: we now run only the test cases that depend
on the documentation included in the ISO image, instead of the entire test
suite. (<a href="https://labs.riseup.net/code/issues/10492">#10492</a>, <a href="https://labs.riseup.net/code/issues/10706">#10706</a> and
<a href="https://labs.riseup.net/code/issues/10707">#10707</a>)</p>

<p>We excluded early, work-in-progress draft branches from being automatically
tested in Jenkins. We want to encourage developers to share work
even if it is very rough, not ready to be merged, and it fails to pass
the test suite. In such cases, we should not discourage developers
with lots of notifications about test failures.
(<a href="https://labs.riseup.net/code/issues/10389">#10389</a>)</p>

<p>We verified, after a whole release cycle, that saving
the video recording for failing test cases wasn't using too much disk
space. (<a href="https://labs.riseup.net/code/issues/10354">#10354</a>)</p>

<p>We fixed a usability issue (for developers) in our test suite setup:
immediately after each release, a branch that was not merged yet
used to be removed from the list of branches that we automatically
build and test, until it was manually updated; this resulted in
losing their automatic build and test history, that sometimes is
valuable debugging data. (<a href="https://labs.riseup.net/code/issues/10123">#10123</a>)</p>

<p>We identified a concerning, and surprising amount of test suite runs aborted on
Jenkins due to timeouts. We investigated the root causes
(<a href="https://labs.riseup.net/code/issues/10720">#10720</a>), and mitigated the problem for the time
being. (<a href="https://labs.riseup.net/code/issues/10717">#10717</a>)</p>

<p>Finally, we automated the way we compute statistics about our ISO
builds and test suite runs in Jenkins. (<a href="https://labs.riseup.net/code/issues/10507">#10507</a>)</p></li>
</ul>


<h2><a name="index6h2"></a>B.3. Extend the coverage of our test suite</h2>

<ul>
<li><p>B.3.11. Fix newly identified issues to make our test suite more robust and faster</p>

<p>During December,</p>

<ul>
<li><p>We fixed several fragile scenarios:
Seahorse (<a href="https://labs.riseup.net/code/issues/10501">#10501</a> and (<a href="https://labs.riseup.net/code/issues/9095">#9095</a>),
whois (<a href="https://labs.riseup.net/code/issues/10523">#10523</a>),
Tails Installer (<a href="https://labs.riseup.net/code/issues/10718">#10718</a>).</p></li>
<li><p>Some fragile scenarios have been worked on and have a proposed fix:
Tails OpenPGP keys, by updating the soon to be expired one
(<a href="https://labs.riseup.net/code/issues/10378">#10378</a>), and Git (<a href="https://labs.riseup.net/code/issues/10444">#10444</a>)).</p></li>
<li><p>We also identified other scenarios that were fragile in Jenkins:
MAC address spoofing (<a href="https://labs.riseup.net/code/issues/10774">#10774</a>),
Evince (<a href="https://labs.riseup.net/code/issues/10775">#10775</a>),
Memory wipe (<a href="https://labs.riseup.net/code/issues/10776">#10776</a>),
Race condition with boot splash (<a href="https://labs.riseup.net/code/issues/10777">#10777</a>), and
Opening Tails roadmap URL from pidgin (<a href="https://labs.riseup.net/code/issues/10783">#10783</a>).
Due to the <code>wait_until_tor_is_working</code> helper being buggy
(<a href="https://labs.riseup.net/code/issues/10497">#10497</a>), we marked most network-related scenarios
as fragile.</p></li>
</ul>
</li>
</ul>


<h2><a name="index7h2"></a>B.4. Freezable APT repository</h2>

<p>This was put aside in December, while the developer responsible for
this project was focusing on porting Tails to Debian Jessie.
A little progress was made nevertheless:</p>

<ul>
<li><p>B.4.5. Implement processes and tools for importing and freezing
those packages (<a href="https://labs.riseup.net/code/issues/10749">#10749</a>, <a href="https://labs.riseup.net/code/issues/10748">#10748</a>,
<a href="https://labs.riseup.net/code/issues/6299">#6299</a>),
B.4.2. Implement a mechanism to save the list of packages used at
ISO build time (<a href="https://labs.riseup.net/code/issues/6297">#6297</a>)</p>

<p>Some more code was written and reviewed. A few potential issues were
identified and are being discussed within the team.</p></li>
<li><p>B.4.6. Adjust the rest of our ecosystem to the freezable APT
repository</p>

<p>We started an evaluation of the hardware resources required by our
draft design (<a href="https://labs.riseup.net/code/issues/6295">#6295</a>).</p></li>
</ul>


<h1><a name="index3h1"></a>C. Scale our infrastructure</h1>

<h2><a name="index8h2"></a>C.2. Be able to detect within hours failures and malfunction on our services</h2>

<p>We had to reschedule our plans on this front, as the Jenkins deliverable
took some more of our time, as well as the Tails 1.8.1 emergency
release.</p>

<p>We already started to build a prototype
setup using Puppet to get an idea of how the chosen solution can be
deployed, and how compatible it is with our setup.</p>

<p>We plan to go on deploying this prototype by the end of January, as
well as finishing the installation of the VM that will host this
service, which means deciding how we'll handle its Puppet
configuration (<a href="https://labs.riseup.net/code/issues/10760">#10760</a>).</p>

<p>We are now aiming to have this all deployed in production by the end
of March.</p>

<h2><a name="index9h2"></a>C.4. Maintain our already existing services</h2>

<p>We kept on answering the requests from the community as well as taking
care of security updates as covered by "C.4.4.  Administer our services
up to milestone IV" until the end of December.</p>

<p>We also had a sysadmin sprint mid-December. Sadly, we ended up
spending most of it on the Tails 1.8.1 emergency release.</p>

<p>To save a bit of disk space that we need for future work (e.g the freezable
APT repo), we reduced the temporary partitions used by our ISO testing
virtual machines, after evaluating what they really use.
(<a href="https://labs.riseup.net/code/issues/10396">#10396</a>)</p>

<h1><a name="index4h1"></a>D. Migration to Debian Jessie</h1>

<h2><a name="index10h2"></a>D.2. Take advantage of systemd to improve the internals of Tails</h2>

<p>We polished code that was previously ported to systemd:</p>

<ul>
<li>Fixed <code>tor-has-bootstrapped</code> semantics on network reconnect
(<a href="https://labs.riseup.net/code/issues/10732">#10732</a>).</li>
</ul>


<h2><a name="index11h2"></a>D.3. Update our test suite for Tails Jessie</h2>

<p>We have updated most of the test suite for Jessie (<a href="https://labs.riseup.net/code/issues/7563">#7563</a>).</p>

<p>Some new test suite robustness problems are left to be addressed, but
the current state was good enough to make us feel comfortable
releasing Tails 2.0~beta1. Besides, we are happy to point out that
this automated test suite made us discover quite a few bugs in
Jessie-based Tails development versions, that would otherwise
have gone noticed until the first beta release. When relevant,
regression tests will be written for these bugs in the next few months.</p>

<p>Here is the list of relevant tickets that were resolved during the
reporting period (most of the test suite porting work was done
directly in Git, without filing tickets for each bit that needed to be
adjusted, though):</p>

<ul>
<li>Dropped an obsolete test case (<a href="https://labs.riseup.net/code/issues/10336">#10336</a>).</li>
<li>Disabled screen blanking during the test suite, it breaks some tests (<a href="https://labs.riseup.net/code/issues/10403">#10403</a>).</li>
<li>Updated the tests for communication with OpenPGP keyservers (<a href="https://labs.riseup.net/code/issues/9791">#9791</a>).</li>
<li>Replaced our previous iptables status regexp-based parser with a new
XML-based status analyzer: the previous implementation could not be
adjusted to the new ip6tables' output (<a href="https://labs.riseup.net/code/issues/9704">#9704</a>).</li>
<li>Updated the "all notifications have disappeared" test suite step for
Jessie (<a href="https://labs.riseup.net/code/issues/8782">#8782</a>).</li>
</ul>


<h2><a name="index12h2"></a>D.4. Document the changes implied by the move to Jessie on our website</h2>

<p>Our technical writers were busy
<a href="https://mailman.boum.org/pipermail/tails-testers/2015-December/000206.html">with other matters</a>
in December, so not much
progress was made on this front yet, apart of updating the list of
documentation pages that will need reworking. Some new contributors
joined the effort, and are working hard together to complete the
update by the end of January.</p>

<h2><a name="index13h2"></a>D.5. Release an official version of Tails based on Jessie</h2>

<p>On December 22 we published a first beta for the upcoming Tails 2.0,
based on Debian Jessie: <a href="https://tails.boum.org/news/test_2.0-beta1/">https://tails.boum.org/news/test_2.0-beta1/</a>.
It was very useful so far: we received a lot of feedback, including
a few bug reports. Most of these bugs were fixed since then, but that
will be for next report round :)</p>

<p>The first release of Tails based on Debian Jessie is still scheduled
for January 26. A release candidate will put out meanwhile.</p>

<h2><a name="index14h2"></a>Various porting to Jessie</h2>

<p>A lot of other porting to Jessie work was done, that does not
fit into any of the above categories:</p>

<ul>
<li>Install Electrum 0.2.5.x in Tails/Jessie (<a href="https://labs.riseup.net/code/issues/10754">#10754</a>).</li>
<li>Fixed obfs4proxy support (<a href="https://labs.riseup.net/code/issues/10724">#10724</a>).</li>
<li>Fixed time synchronization in bridge mode when the clock is way off
(<a href="https://labs.riseup.net/code/issues/10696">#10696</a>).</li>
</ul>


<h1><a name="index5h1"></a>E. Release management</h1>

<ul>
<li><p><a href="../../../../news/version_1.8.html">Tails 1.8</a> was released on 2015-12-15:</p>

<ul>
<li>Icedove is now the official email client in Tails, replacing
Claws Mail.</li>
<li>Electrum is upgraded to 2.5.4.</li>
<li>Tor Browser is upgraded to 5.0.5.</li>
<li>Tor is upgraded to 0.2.7.6.</li>
<li>I2P is upgraded to 0.9.23.</li>
<li>Icedove is upgraded to 38.4.</li>
<li>Enigmail is upgraded to 1.8.2.</li>
</ul>
</li>
<li><p><a href="../../../../news/version_1.8.1.html">Tails 1.8.1</a> was released on 2015-12-19:</p>

<ul>
<li>Tor Browser is upgraded to 5.0.6.</li>
<li>Fixed time synchronization in bridge mode.</li>
</ul>
</li>
</ul>


</div>







</div>

<div id="footer" class="pagefooter" role="contentinfo">

<div id="pageinfo">












</div>
<div id="mirrorlist">Mirror: <a href="https://tails.boum.org/ikiwiki.cgi?do=goto&page=contribute/reports/SponsorS/2015/2015_12">tails.boum.org</a></div>

<!-- from The Amnesic Incognito Live System -->
</div>

</div>

<script type="text/javascript">
  var linkelements = document.querySelectorAll('.use-mirror-pool');
  if(linkelements.length > 0) {
    replaceUrlPrefixWithRandomMirror(linkelements);
  }
</script>

</body>
</html>
