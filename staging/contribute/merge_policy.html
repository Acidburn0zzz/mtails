<!DOCTYPE html>

<html lang="en" dir="ltr" xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tails - Git merge policy</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<link rel="icon" href="../favicon.ico" type="image/x-icon" />

<link rel="stylesheet" href="../style.css" type="text/css" />

<link rel="stylesheet" href="../local.css" type="text/css" />


<script src="../lib/js/mirror-dispatcher.js" type="text/javascript"></script>









</head>


<body class="en">


<div class="searchform">



</div>

<div class="banner" role="banner">
  <a class="tails" href="../index.en.html">
    <span class="acronym">Tails</span><br/>
    <span class="slogan">The Amnesic Incognito Live System</span>
  </a>
</div>

<div class="page">

<div class="pageheader">
<div class="header">
<span>
<span class="parentlinks">
<ul id="crumbs">
<li><a href="../index.en.html"><img src="../lib/home.png"></a></li>







<li><a href="../contribute.en.html">contribute</a></li>




<li>Git merge policy</li>

</ul>
</span>
<span class="title">
Git merge policy
</span>
</span>
</div>










</div>



<div class="sidebar" role="navigation">
<div class="download button">
  <a href="../install.en.html"><span class="download">Install</span>
    <span class="tails">Tails 
3.9
</span>
    <span class="date">
2018-09-05</span></a>
</div>




<div class="links">
  <ul>
    <li><a href="../about.en.html">About</a></li>
    <li><a href="../getting_started.en.html">Getting startedâ€¦</a></li>
    <li><a href="../doc.en.html">Documentation</a></li>
    <li><a href="../support.en.html">Help &amp; Support</a></li>
    <li><a href="../contribute.en.html">Contribute</a></li>
    <li><a href="../news.en.html">News</a></li>
  </ul>
</div>




<div class="donate button">
    <a href="https://tails.boum.org/donate?r=sidebar">Donate</a>
</div>


</div>



<div id="pagebody">

<div id="content" role="main">


<div id="intro">

<p>New contributors can get started with the <a href="./how/code.html">how to contribute code
to Tails</a> documentation.</p>

<p>Tails is developed in a set of <a href="./git.html">Git repositories</a>.</p>


<div class="toc">
<ol>
	<li class="L1"><a href="#index1h1">Common rules</a>
	<ol>
		<li class="L2"><a href="#index1h2">Documentation is not optional</a>
		</li>
		<li class="L2"><a href="#index2h2">Test your code</a>
		</li>
		<li class="L2"><a href="#index3h2">Do not break the build... or get reverted</a>
		</li>
	</ol>
	</li>
	<li class="L1"><a href="#index2h1">How to submit your changes</a>
	</li>
	<li class="L1"><a href="#index3h1">Review and merge process</a>
	<ol>
		<li class="L2"><a href="#index4h2">Review</a>
		</li>
		<li class="L2"><a href="#index5h2">Merge</a>
		</li>
		<li class="L2"><a href="#index6h2">Book keeping</a>
		</li>
	</ol>
	</li>
</ol>
</div>


</div>


<h1><a name="index1h1"></a>Common rules</h1>

<h2><a name="index1h2"></a>Documentation is not optional</h2>

<p>When writing Tails code, one commits to adapt the design and end-user
documentations accordingly in a timely manner, writing brand new
chapters if needed.</p>

<h3><a name="index1h3"></a>Design documentation</h3>

<p>As a side note, best is generally to write specification and design
documentation before implementing changes; among other very valid
reasons to do so, it may avoid doing work that won't be applied ever,
or be reverted later, because of a faulty design that was reviewed and
diagnosed only when the implementation was up and running. On the
other hand, we're not great fans of over-engineering and we do know
proceeding like this is not always an option, as the right design
sometimes arises from erratic implementation attempts.</p>

<h3><a name="index2h3"></a>User documentation</h3>

<p>See our <a href="./how/documentation/guidelines.html">documentation guidelines</a>.</p>

<p>Verify that your changes do not affect the rest of the user documentation and
FAQ. If so, fix it in your development branch so that it gets automatically
integrated when your branch get released.</p>

<p>Regarding the FAQ, don't write new questions in advance but make sure that the
existing ones are still correct.</p>

<h2><a name="index2h2"></a>Test your code</h2>

<p>A branch proposed for review and merge must have been tested when applied
against the target branch(es) of the requested merge.</p>

<h2><a name="index3h2"></a>Do not break the build... or get reverted</h2>

<p>Noone should ever push changes breaking the build into the shared Git
repository. On the other hand, this may happen since preliminary,
untested changes may in some circumstances land into our <code>devel</code>
branch to be reviewed and get more exposure.</p>

<p>If you find the <code>devel</code> branch in a non-building state and can
identify the root cause of it to a recent commit, fix it if you wish,
but don't let it disturb you otherwise: just revert the faulty commit
and inform the other developers on <a href="../about/contact.en.html#tails-dev">tails-dev@boum.org</a> so that the author knows
s/he needs to fix his/her stuff before reapplying it at a later point.</p>

<p><a id="submit"></a></p>

<h1><a name="index2h1"></a>How to submit your changes</h1>

<p>All development should happen in topic branches. For a new feature XXX, it should
be named <code>feature/XXX</code>. For a bugfix about YYY, it should be named
<code>bugfix/YYY</code>. Ideally, include the relevant ticket number in the topic
branch name, e.g. <code>bugfix/7173-upgrade-syslinux</code>.</p>

<p>When the developer thinks it is good enough and has tested it, she must:</p>

<ul>
<li>if you have access to our Jenkins instance (if you don't know what
this means, you do not) please make sure that your branch has not
broken any tests!</li>
<li>set the ticket's <em>Status</em> field to <em>In Progress</em> (if you do not see
this field when editing the ticket, ask the <a href="./working_together/roles/sysadmins.html">sysadmin team</a>
to grant you the necessary permissions)</li>
<li>set the ticket's <em>QA Check</em> field to <em>Ready for QA</em></li>
<li>assign this ticket to nobody (aka. unassign it from yourself) by
default. Unless it's clear to you that nobody on the
<a href="./working_together/roles/foundations_team.html">Foundations Team</a> will be
able or willing to do this specific review; in that case, <em>you</em> shall try
to find someone else to do the review, and assign the ticket
to them.</li>
<li>point the ticket's <em>Feature Branch</em> field to your branch</li>
<li>set the ticket's <em>Target version</em> field to the release you would
like your changes to be in</li>
<li>for important changes, if you feel the need to ask input from the
greater development community, notify the <a href="../about/contact.en.html#tails-dev">tails-dev@boum.org</a>
mailing list</li>
</ul>


<p>Then, if the <a href="./merge_policy/review.html">reviewer</a> asks for more
development to be done before
merging, they should set the ticket's <em>QA Check</em> field back to <em>Needs
more dev</em> or <em>Needs more info</em> state, and
from now on it's the responsibility of the branch/ticket "holder" to
change it back to <em>Ready for QA</em> once they consider the issues raised by
the reviewer are fixed.</p>

<h1><a name="index3h1"></a>Review and merge process</h1>

<h2><a name="index4h2"></a>Review</h2>

<ul>
<li>When you start doing a review'n'merge, assign the relevant ticket to
you, in order to avoid duplicated work.</li>
<li>Merge the base branch (the one you're supposed to merge the reviewed
topic branch into, as specified in <code>config/base_branch</code> and in the
pull request -- they must match) into the topic branch.</li>
<li>Build the topic branch and test the feature.</li>
<li>Check automated ISO build and test results on
<a href="https://jenkins.tails.boum.org/">https://jenkins.tails.boum.org/</a>.</li>
<li>Check the diff e.g. with <code>git log -p</code>. Beware of changes introduced
by merge commits: either add the <code>--cc</code> option to <code>git log</code>, or use
<code>git diff</code> after reviewing the individual patches.</li>
<li>Check the APT suite with
<code>ssh reprepro@incoming.deb.tails.boum.org reprepro list [bugfix|feature]-&lt;name-with-dashes&gt;</code></li>
<li>Check the user and design documentation.</li>
<li>Check the ticket.</li>
<li>Changes proposed by new contributors, or by the patch'n'forget kind,
shall respectively be applied once they are in <em>good enough</em> state.
That is, once the core developers team feels like maintaining it on
the long run in case the initial submitter disappears. Such
maintenance includes: polishing the proposed changes to make them fit
for release; writing and updating the design and end-user
documentations; fixing bugs.</li>
<li>Remember that it's hard to receive negative feedback. Don't forget
to note the good parts, be constructive and precise in your
comments, and never use reviews to make personal attacks. You can
read these blog posts on review and feedback:

<ul>
<li><a>Kate Heddleston: Criticism and ineffective feedback</a></li>
<li><a href="http://www.3coze.com/2016/07/17/bite-your-tongue/">Liane Davey: Maybe you shouldn't give feedback</a></li>
</ul>
</li>
</ul>


<h2><a name="index5h2"></a>Merge</h2>

<p>Merge the branch with <code>--no-ff</code>:</p>

<ul>
<li>for a new feature: into <code>devel</code></li>
<li>for a fix on top on the last RC: into <code>testing</code>; then merge
<code>testing</code> into <code>devel</code></li>
<li>for a fix on top of the last stable: into <code>stable</code>; then merge
<code>stable</code> into <code>devel</code></li>
</ul>


<p><a id="fix-committed"></a></p>

<p>Please consider including <code>fix-committed: #NNNN</code> in the commit
message, <em>NNNN</em> being the ticket number that is fixed by the branch
you are merging. Then, Redmine will automatically flag the
corresponding ticket as "Fix committed" once you push the results of
your merge to our main <a href="./git.html">Git repository</a>. For example:</p>

<pre><code>Merge branch 'bugfix/8470-clean-up-apt-pinning' (Fix-committed: #8470)
</code></pre>

<h2><a name="index6h2"></a>Book keeping</h2>

<ol>
<li>Update the <em>QA Check</em> field on the ticket. If there is no remaining
tasks listed on the ticket, then change its status to <em>Fix
committed</em> (unless you used the <code>fix-committed</code> keyword documented
above); else, ask the branch submitter to split the remaining tasks
into other tickets.</li>
<li>Push the updated branch to the master Git repository.</li>
<li>Reply to the email that requested the review, if any.</li>
</ol>


</div>







</div>

<div id="footer" class="pagefooter" role="contentinfo">

<div id="pageinfo">







<div id="backlinks">
Pages linking to this one:

<a href="../contribute.en.html">contribute</a>

<a href="../contribute.ar.html">contribute.ar</a>

<a href="../contribute.ca.html">contribute.ca</a>

<a href="../contribute.de.html">contribute.de</a>

<a href="../contribute.es.html">contribute.es</a>

<a href="../contribute.fa.html">contribute.fa</a>

<a href="../contribute.fr.html">contribute.fr</a>

<a href="../contribute.it.html">contribute.it</a>

<a href="../contribute.pl.html">contribute.pl</a>

<a href="../contribute.pt.html">contribute.pt</a>


<span class="popup">...
<span class="balloon">

<a href="../contribute.ru.html">contribute.ru</a>

<a href="../contribute.sr_Latn.html">contribute.sr Latn</a>

<a href="../contribute.tr.html">contribute.tr</a>

<a href="../contribute.zh.html">contribute.zh</a>

<a href="../contribute.zh_TW.html">contribute.zh TW</a>

<a href="./git.html">git</a>

<a href="./how/code.html">how/code</a>

<a href="./how/documentation.html">how/documentation</a>

<a href="./working_together/Redmine.html">working together/Redmine</a>

<a href="./working_together/document_progress.html">working together/document progress</a>

</span>
</span>

</div>






</div>
<div id="mirrorlist">Mirror: <a href="https://tails.boum.org/ikiwiki.cgi?do=goto&page=contribute/merge_policy">tails.boum.org</a></div>

<!-- from The Amnesic Incognito Live System -->
</div>

</div>

<script type="text/javascript">
  var linkelements = document.querySelectorAll('.use-mirror-pool');
  if(linkelements.length > 0) {
    replaceUrlPrefixWithRandomMirror(linkelements);
  }
</script>

</body>
</html>
